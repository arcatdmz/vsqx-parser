"use strict";function parseVSQ3Tempos(e){return Array.prototype.slice.call(e.querySelectorAll("vsq3>masterTrack>tempo")).map(function(e){return{tick:parseInt(e.querySelector("posTick").textContent),bpm:parseInt(e.querySelector("bpm").textContent)}})}function parseVSQ4Tempos(e){return Array.prototype.slice.call(e.querySelectorAll("vsq4>masterTrack>tempo")).map(function(e){return{tick:parseInt(e.querySelector("t").textContent),bpm:parseInt(e.querySelector("v").textContent)}})}Object.defineProperty(exports,"__esModule",{value:!0});var vsq3NS="http://www.yamaha.co.jp/vocaloid/schema/vsq3/",vsq4NS="http://www.yamaha.co.jp/vocaloid/schema/vsq4/";function parse(e){var r=(new DOMParser).parseFromString(e,"text/xml");if(isParseError(r))return{error:"XML parse error",data:null};if(r.children.length<=0||r.children[0].namespaceURI!==vsq3NS&&r.children[0].namespaceURI!==vsq4NS||"vsq3"!==r.children[0].tagName&&"vsq4"!==r.children[0].tagName)return{error:"Unsupported VSQX format",data:null};var t=r.children[0],a=t.querySelector("vsq3>vender")||t.querySelector("vsq4>vender"),n=a&&a.textContent,s=t.querySelector("vsq3>version")||t.querySelector("vsq4>version");return{data:{vender:n,version:s&&s.textContent,tempos:"vsq3"===r.children[0].tagName?parseVSQ3Tempos(t):parseVSQ4Tempos(t),raw:t}}}function isParseError(e){var r=(new DOMParser).parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===r?e.getElementsByTagName("parsererror").length>0:e.getElementsByTagNameNS(r,"parsererror").length>0}exports.parse=parse;
