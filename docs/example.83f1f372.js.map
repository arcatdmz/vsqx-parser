{"version":3,"sources":["../dist/index.es.js","index.ts"],"names":["e","r","t","n","DOMParser","parseFromString","getElementsByTagName","namespaceURI","length","getElementsByTagNameNS","error","data","children","tagName","a","o","l","querySelector","s","textContent","c","vender","version","tempos","Array","prototype","slice","call","querySelectorAll","map","tick","parseInt","bpm","raw"],"mappings":";AAAo2C,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,MAAA,EAAp2C,IAAIA,EAAE,gDAAgDC,EAAE,gDAAgD,SAASC,EAAEA,GAAOC,IAAAA,GAAG,IAAIC,WAAWC,gBAAgBH,EAAE,YAAe,GAAA,SAASF,GAAOC,IAAAA,GAAG,IAAIG,WAAWC,gBAAgB,IAAI,YAAYC,qBAAqB,eAAe,GAAGC,aAAgB,MAAA,iCAAiCN,EAASD,EAAEM,qBAAqB,eAAeE,OAAO,EAASR,EAAES,uBAAuBR,EAAE,eAAeO,OAAO,EAA1Q,CAA6QL,GAAG,MAAM,CAACO,MAAM,kBAAkBC,KAAK,MAASR,GAAAA,EAAES,SAASJ,QAAQ,GAAGL,EAAES,SAAS,GAAGL,eAAeP,GAAGG,EAAES,SAAS,GAAGL,eAAeN,GAAG,SAASE,EAAES,SAAS,GAAGC,SAAS,SAASV,EAAES,SAAS,GAAGC,QAAQ,MAAM,CAACH,MAAM,0BAA0BC,KAAK,MAAUG,IAAAA,EAAEC,EAAEZ,EAAES,SAAS,GAAGI,EAAED,EAAEE,cAAc,gBAAgBF,EAAEE,cAAc,eAAeC,EAAEF,GAAGA,EAAEG,YAAYC,EAAEL,EAAEE,cAAc,iBAAiBF,EAAEE,cAAc,gBAAsB,MAAA,CAACN,KAAK,CAACU,OAAOH,EAAEI,QAAQF,GAAGA,EAAED,YAAYI,OAAO,SAASpB,EAAES,SAAS,GAAGC,SAASC,EAAEC,EAAES,MAAMC,UAAUC,MAAMC,KAAKb,EAAEc,iBAAiB,2BAA2BC,IAAI,SAAS7B,GAAS,MAAA,CAAC8B,KAAKC,SAAS/B,EAAEiB,cAAc,WAAWE,aAAaa,IAAID,SAAS/B,EAAEiB,cAAc,OAAOE,iBAAiB,SAASnB,GAAUwB,OAAAA,MAAMC,UAAUC,MAAMC,KAAK3B,EAAE4B,iBAAiB,2BAA2BC,IAAI,SAAS7B,GAAS,MAAA,CAAC8B,KAAKC,SAAS/B,EAAEiB,cAAc,KAAKE,aAAaa,IAAID,SAAS/B,EAAEiB,cAAc,KAAKE,gBAArM,CAAsNJ,GAAGkB,IAAIlB;;ACkB/1C,aAlBD,IAAA,EAAA,QAAA,OAEM,EAAQ,SAAS,cAAc,SAGrC,SAAS,IACH,KAAA,EAAM,MAAM,QAAU,GAAtB,CACE,IAAA,EAAO,EAAM,MAAM,KAAK,GACxB,EAAS,IAAI,WACnB,EAAO,iBAAiB,OAAQ,SAAA,GACxB,IAAA,GAAS,EAAM,EAAA,OAAA,EAAO,QACtB,EAAM,EAAO,KAAK,IACxB,KAAI,KAAW,SACR,EAAO,KAAK,IACnB,SAAS,cAAc,OAAO,YAAc,KAAK,UAAU,KAE7D,EAAO,mBAAmB,IAb5B,EAAM,iBAAiB,SAAU","file":"example.83f1f372.js","sourceRoot":"..\\example","sourcesContent":["var e=\"http://www.yamaha.co.jp/vocaloid/schema/vsq3/\",r=\"http://www.yamaha.co.jp/vocaloid/schema/vsq4/\";function t(t){var n=(new DOMParser).parseFromString(t,\"text/xml\");if(function(e){var r=(new DOMParser).parseFromString(\"<\",\"text/xml\").getElementsByTagName(\"parsererror\")[0].namespaceURI;if(\"http://www.w3.org/1999/xhtml\"===r)return e.getElementsByTagName(\"parsererror\").length>0;return e.getElementsByTagNameNS(r,\"parsererror\").length>0}(n))return{error:\"XML parse error\",data:null};if(n.children.length<=0||n.children[0].namespaceURI!==e&&n.children[0].namespaceURI!==r||\"vsq3\"!==n.children[0].tagName&&\"vsq4\"!==n.children[0].tagName)return{error:\"Unsupported VSQX format\",data:null};var a,o=n.children[0],l=o.querySelector(\"vsq3>vender\")||o.querySelector(\"vsq4>vender\"),s=l&&l.textContent,c=o.querySelector(\"vsq3>version\")||o.querySelector(\"vsq4>version\");return{data:{vender:s,version:c&&c.textContent,tempos:\"vsq3\"===n.children[0].tagName?(a=o,Array.prototype.slice.call(a.querySelectorAll(\"vsq3>masterTrack>tempo\")).map(function(e){return{tick:parseInt(e.querySelector(\"posTick\").textContent),bpm:parseInt(e.querySelector(\"bpm\").textContent)}})):function(e){return Array.prototype.slice.call(e.querySelectorAll(\"vsq4>masterTrack>tempo\")).map(function(e){return{tick:parseInt(e.querySelector(\"t\").textContent),bpm:parseInt(e.querySelector(\"v\").textContent)}})}(o),raw:o}}}export{t as parse};\n","import { parse } from \"../\";\r\n\r\nconst input = document.querySelector(\"input\") as HTMLInputElement;\r\ninput.addEventListener(\"change\", handleFileSelect);\r\n\r\nfunction handleFileSelect() {\r\n  if (input.files.length <= 0) return;\r\n  const file = input.files.item(0);\r\n  const reader = new FileReader();\r\n  reader.addEventListener(\"load\", _e => {\r\n    const result = parse(reader.result as string);\r\n    const raw = result.data.raw;\r\n    self[\"vsq4\"] = raw;\r\n    delete result.data.raw;\r\n    document.querySelector(\"pre\").textContent = JSON.stringify(result);\r\n  });\r\n  reader.readAsBinaryString(file);\r\n  // Array.from(input.files).forEach(console.log.bind(console));\r\n}\r\n"]}